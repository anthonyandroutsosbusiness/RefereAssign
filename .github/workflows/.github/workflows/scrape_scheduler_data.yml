# Required permissions to checkout, read the file, and commit the new file
permissions:
  contents: write 

steps:
  - name: Checkout repository
    uses: actions/checkout@v4
    with:
      # Required to allow the action to commit changes
      token: ${{ secrets.GITHUB_TOKEN }} 

  - name: Set up Python
    uses: actions/setup-python@v5
    with:
      python-version: '3.x'

  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install requests beautifulsoup4

  - name: Run the Python scraper script
    # This calls your script
    run: python fixture_scrapper.py

  - name: Commit and Push new JSON Data
    uses: stefanzweifel/git-auto-commit-action@v5
    with:
      # This is the file your HTML is looking for
      commit_message: "Automated: Update weekly fixture data for web display"
      files: fixtures.json
      commit_author: 'Automated Bot <actions@github.com>'
